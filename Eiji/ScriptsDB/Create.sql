DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'Exame.Infra.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201906202017511_CriarBanco'
BEGIN
    CREATE TABLE [dbo].[PRODUTO_COSIF] (
        [COD_COSIF] [uniqueidentifier] NOT NULL DEFAULT newsequentialid(),
        [COD_CLASSIFICACAO] [int] NOT NULL,
        [STA_STATUS] [int] NOT NULL,
        [COD_PRODUTO] [uniqueidentifier] NOT NULL,
        CONSTRAINT [PK_dbo.PRODUTO_COSIF] PRIMARY KEY ([COD_COSIF])
    )
    CREATE INDEX [IX_COD_PRODUTO] ON [dbo].[PRODUTO_COSIF]([COD_PRODUTO])
    CREATE TABLE [dbo].[MOVIMENTO_MANUAL] (
        [COD_MOVIMENTO] [uniqueidentifier] NOT NULL,
        [DAT_MES] [tinyint] NOT NULL,
        [DAT_ANO] [smallint] NOT NULL,
        [NUM_LANCAMENTO] [int] NOT NULL,
        [COD_PRODUTO] [uniqueidentifier] NOT NULL,
        [DES_DESCRICAO] [varchar](50) NOT NULL,
        [DAT_MOVIMENTO] [datetime] NOT NULL,
        [COD_USUARIO] [varchar](15) NOT NULL,
        [VAL_VALOR] [int] NOT NULL,
        [COD_COSIF] [uniqueidentifier] NOT NULL,
        CONSTRAINT [PK_dbo.MOVIMENTO_MANUAL] PRIMARY KEY ([COD_MOVIMENTO], [DAT_MES], [DAT_ANO], [NUM_LANCAMENTO], [COD_PRODUTO])
    )
    CREATE INDEX [IX_COD_COSIF] ON [dbo].[MOVIMENTO_MANUAL]([COD_COSIF])
    CREATE TABLE [dbo].[PRODUTO] (
        [COD_PRODUTO] [uniqueidentifier] NOT NULL DEFAULT newsequentialid(),
        [DES_PRODUTO] [varchar](30),
        [STA_STATUS] [int] NOT NULL,
        CONSTRAINT [PK_dbo.PRODUTO] PRIMARY KEY ([COD_PRODUTO])
    )
    ALTER TABLE [dbo].[PRODUTO_COSIF] ADD CONSTRAINT [FK_dbo.PRODUTO_COSIF_dbo.PRODUTO_COD_PRODUTO] FOREIGN KEY ([COD_PRODUTO]) REFERENCES [dbo].[PRODUTO] ([COD_PRODUTO])
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COSIF_COD_COSIF] FOREIGN KEY ([COD_COSIF]) REFERENCES [dbo].[PRODUTO_COSIF] ([COD_COSIF])
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906202017511_CriarBanco', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400CD5BDB6EE336107D2FD07F10F458A4562ED86D1BD8BBD03AC9C2686C0791BDE89BC148B44354A2BC2215C428FA657DE827F5173ABA511225EA1667375804D8489CC3E1CCF07038A3FCF7CFBFE38FCF9EAB3DE180119F4EF4B3D1A9AE616AFB0EA1BB891EF2EDCFBFEA1F3FFCF8C3F8DAF19EB52FD9B88B681C485236D11F39DF5F1A06B31FB187D8C82376E0337FCB47B6EF19C8F18DF3D3D3DF8CB3330303840E589A36BE0F29271E8E7F815FA73EB5F19E87C89DFB0E7659FA1CDE5831AAB6401E667B64E3897EFD0CFF1FCDE83640A3BB481FC64161AC6BA64B10A8636177AB6B88529F230ECA5EAE19B678E0D39DB58707C85D1DF618C66D91CB70BA88CB7C78D7F59C9E47EB3172C10CCA0E19F7BD9E806717A9810C597C909975614030E135989A1FA255C7669CE8539F1130913CD3E5D40DA2519989AF7C8F50E28F627982D928963BD14A6F4F444C40E844FF4EB469E8F230C0138A431E20F744BB0B1F5C62FF8E0F2BFF4F4C273474DDA282A022BC2B3D80477781BFC7013FDCE3AD50DB213B5FD78CB2AC210B0B51492E59DBE79038BAB6001DD0838B451814CC60713FC09F31C501E2D8B9439CE300BC3873706CC88A02F2742E62602762231B8959A3A00443865EE92D843D4735CA344F60819E21AB20678F7BA225D681874EC8DB8C24212DD013D9C5369330E7FE136C6ECA7D50E71EBBF110F648F6A9B6E2F5268DC49BC0F7EE7DB72899BCDAAC50B0C31CD4F2EBDF5B7E18D83D3413EBAC512B41142372A54A2FC494994AE5B799C24585C646BE051B37A658DD80CD2964DFDA06AD1D3AC7ACD3389376C35B841E0EFC5B446D941AB0839014FAAFC22BCD9B2F364322FFE9C0716FF9D83C89FC8CF2B3F7BD01AA76136817E7DF924B24A42BCCEC80140994079091E8DA1C3DDF62BAE38F13FD1DA42037E4193BD98314794D09E42F20C383B0BF49AF1047857D98CC0E0FF10A1EF5465BB31005A4691567EF5E63155F90EB07C77066CAD047391652AC979D0832FDAA4E8C41042C42B737FDA6926F8D7CDF5C76D465635F74DBD8AF9A253507717D5ED3318190739AFAF4A25BFC865E217A55F9E58CDDB868975F79BA0777E82992D623C539B8D4C1817B8008285255D91573EC3DE0203BB0FCC04320080417C2AF6715C79546CF577331F4BC6AD3C47A2D16CD22E6C5564C80BE9BE54C4E9E7C618DF7EF9A2D37A3A834FE978B2EE63319F36D129B434E6953662F4F794D1DAD85E6F3ED5B3895E76022B207A3C0A698E83F5596A2C6159B2FC74D8F9C326635B0806A7110911C72610B30700DA1BCCACB84DA648FDCE6E925B17ED9B4212691DF5CE13DA61111371BB5FBECA969AA2A8899A4D3A6CD4863A31022CD91536653957F1577B316EF36458C82AC734441F0AF1231B5D37FA378A93566F7B91537A9578997E4408CCF2242056BC5D41A3DC4CFBC86A1D70CA724CDD224420E8208D4C25C3AEBF3D3B71C5495182A8B17CB201588029BB5C0A466AD0351DD5D0B46AB51274BB20BA31479B8ECC776BE16CA97975F898876862E20657E9073DBF2323B9840CAD0AA0668209D0EB4D3AA7207A22960E48EEFBCF02C53141B23AFA41B49293D2BB91B8A9AFB788EF67BC82A0A35F8F489662505F8E9CF56FFA2B497601836ABA94D0B6DC54C70C9403B2CBD8D7906DF9080F1E896FE80A2346CEA789561251A506CAE6CAAD24EAF3A2BDB70D9F0E8FF05AEA9F62146B53B27B7E20D2C2C0AF7788D588E98AA5CDC03412E0A14F7B6A9EF861E4D9F2DAF36D3A535BBA9C65D0350B95E5DC1BB352D409C4DCDA9B9EC839BE5CD45406B656EE067B5B67A69583E5D640DEFEE9757EB55AD6E6343B27AE560AA7858DA6972BC748AA602F31D23A2F2A3A27F5435C8F68DACF9F2CB6C7EBDA8B7B40A2CAE701691AECCD5667EDDCBFF719553C63017BDF4A8163A8B808BF57C736B2EA666EFF50D8F4D1562A142525AF3B5B5819FE9FDACE73E940A9A155F0CF1AA286BCAEB5D5B6BF37ED60B2B2D551691BE98B71BF859DEF7F7449ADA7466C5EFC410E2683F063F28D2950EECA094ECCB0DC78DF30168FD4F9B57F57C250F938788D9453E26E55DE334076AFF20A292142543740D4CF4449C2821B20E102ADE281A30B2BEBA5397C07AF3017344C916339ED497F4F3D3B373E9738AB7F36983C198E30EFBBE610637D0E789FE97F6F7A002BB8A463AD4D873D1E4F21652F235C424AE996F0906FA6B2DABF7EDDE5453B7646A1239BEEF1707858D341CA5C4132A3BA89D16815C6AB33F36059C136D1940FC5E6AA7E0D3667D8ED2847F7904351CB73512CA644931B63629AA6B97B7E43B0AE515BCDC6D031456AE727EDF566D669D048F137A181297C270090CF390EB0EC1918DFACA3BA5EF2ACBF96382FA8402FB110595B6FA1047C8EE7580C8F8909E79298F54EB1935CEFB76C5F3BCF265CE6921F38E2416A3BC0685A9DBD82F27B01771406B501FFB182C6593EA58BA28C57CA7F6F2802351E5BFE15DB3D2D7197D9A5935E5D7A1BDB6E15D8E6EAD05F5ED6D4827ECE573BE99D697F49D55BFDE54EF183A92E3D577D55E74D3BFAD758C19BF5117AB5AE5EED0A65277A992EB201CC80F51AC24EC942E5271A15136B29AFB58751389B4603337176BF3B66BB7ABA9D9D5B0A0EFD0092B59BF50C9EFD4F3AA6F98BDA54E97E48F52D9A8B5BBD56E96E3F4B2AAB512D894853F31014A60649743447F7042B15DDA8E62CC8C6EFD8C1A248DB2219522374790EE2233803C06D91C5EDB98B1F8BBB6F4FB996BEF013B33BA0CF93EE4B064EC3DB8A58FE52276699A3F6ED895751E2FF7F11768C75802A849A28C7D493F85C47584DE3735698C0222A2AD34758B7CC9A3146E7710480B9F76044ACD27D87685BDBD0B606C492DF48487E8B666F816EF907DC84A5E6A90764794CD3EBE226817208FA518B93CFC0A31EC78CF1FFE07E209DCAB69350000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201906211317125_Relacionamento_AutomaticMigration'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COSIF_COD_COSIF]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COSIF_COD_COSIF]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_COD_COSIF' AND object_id = object_id(N'[dbo].[MOVIMENTO_MANUAL]', N'U'))
        DROP INDEX [IX_COD_COSIF] ON [dbo].[MOVIMENTO_MANUAL]
    ALTER TABLE [dbo].[PRODUTO_COSIF] DROP CONSTRAINT [PK_dbo.PRODUTO_COSIF]
    DECLARE @var0 nvarchar(128)
    SELECT @var0 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.PRODUTO_COSIF')
    AND col_name(parent_object_id, parent_column_id) = 'COD_COSIF';
    IF @var0 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[PRODUTO_COSIF] DROP CONSTRAINT [' + @var0 + ']')
    ALTER TABLE [dbo].[PRODUTO_COSIF] ALTER COLUMN [COD_COSIF] [uniqueidentifier] NOT NULL
    ALTER TABLE [dbo].[PRODUTO_COSIF] ADD CONSTRAINT [PK_dbo.PRODUTO_COSIF] PRIMARY KEY ([COD_COSIF], [COD_PRODUTO])
    CREATE INDEX [IX_COD_MOVIMENTO] ON [dbo].[MOVIMENTO_MANUAL]([COD_MOVIMENTO])
    CREATE INDEX [IX_COD_COSIF_COD_PRODUTO] ON [dbo].[MOVIMENTO_MANUAL]([COD_COSIF], [COD_PRODUTO])
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COD_MOVIMENTO] FOREIGN KEY ([COD_MOVIMENTO]) REFERENCES [dbo].[PRODUTO] ([COD_PRODUTO])
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COSIF_COD_COSIF_COD_PRODUTO] FOREIGN KEY ([COD_COSIF], [COD_PRODUTO]) REFERENCES [dbo].[PRODUTO_COSIF] ([COD_COSIF], [COD_PRODUTO])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906211317125_Relacionamento_AutomaticMigration', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400D55BDD6EE33616BE2FB0EF20E872915A718269BB81DDC27592C2686C07913DD83B83916887A844B92415C428F6C9F6A28FB4AFB0477F9444FDCB9A490683001389FC7878CEC78F873ACCFFFEFBF7E49737D7D15E31E3C4A3537D3CBAD4354C2DCF26F430D57DB1FFFE27FD979FFFF1DDE4CE76DFB4CF49BBEBA01DF4A47CAABF0871BC310C6EBD6017F1914B2CE6716F2F4696E71AC8F68CABCBCB7F19E3B1810142072C4D9B3CF954101787BFC0AF738F5AF8287CE42C3D1B3B3C7E0E6FCC10555B2117F323B2F054BF7B83FF8F1674CFD0E831B0870B3018EBDACC2108CC31B1B3D73544A9279000636FB61C9B8279F4601EE1017236A72386767BE4701C4FE2266DDE763E9757C17C8CB4630265F95C786E47C0F175EC2043EDDECBCDBA7420B8F00E5C2D4EC1AC43374EF5B9C709B8481DE966EEB0A055E2E25BCF259478A3B03FC17C14F6BBD0726F2F2427803AC1BF0B6DEE3BC267784AB12F18722EB447FFD921D6EFF8B4F1FEC0744A7DC7C91A0826C2BBDC0378F4C8BC2366E2F484F7D26C9B1C3C5D33DA3685E7B62F0A3D26863A9C4450468ABCF19B4F6C5D5B81D5E8D9C19238460B0869C139480EE2E07762210B49A480E41018DFCDBD85652450E7014C08BFCF0BC8C9E326B4157A258790400AEED27B85254E8507204FD8099BF017728CC790AF77311FEF99E73E794EB667F46AB741EC800558E895BF373D9F591D2C936129312B42942D52A3722FE4908949F9B789C159832646BA106B97A79C5D8F252AFB7E13CB748979AB7633DA0E6FE5BB98790F885A2876E037A115A11BA2FEBF9E04EEDC3F744FD47F41C5F887CE0045BF49B4EBAB7794BE5BCC2D46B2B22718E425BAB6446F0F981EC4CB54FF0489C83D79C376F22046DE5202590CF411CCEFEED25B2450661D46A3C343BC81479DD1B6DC478CD4CD62FCE94BCCE233723C3644306385EE12CA4AF18DB1CEDB1154F9ADDA3186D81152EC925DA1F0B2C6B44176076943E7BD21EEF9D17686812436E30853780CFF862966B060ED4724046690862F6C1C3A7308D5B96EA73AEF9378854BA03CE96A99DDA8095779EED38EBFBE9B616F55CABAE0F70E3AA4A7B2F6E4F6DD8A3C78209E43486DCC9C133020ABA3F9502CB1FB8C59B29B7ACC45D011D4D7875FC785C0E55A2F374BD9F4AAE8D3C87B0D1E4D1873B61723A077F3DC4C90574F7AE3874FF59E5B50946BFFE3751BF7CD38F72C12BA43CDB7E36D273FE41DB5B5863D285DBE999461092E2247700A2C8AA9FECFC254AA71E5E24B71E3FD308F592416482D6681C82107960087D0102A8ABA4CA8458EC8A91F5EE9D629D5EF9E6707D19286A96F6EF111D340BCEB03D1DE88D89DC3982DAD5376B5A6604C8C0C15DB3234B1A3994B85746430961636891459BAE90B335531E11CAEF6E29DE2DCF3C6FF0A04CA6FFB5521AEF8C2D1204375A4A9C82ABE16614A87FF4A642975E6C7149C28730B932642E5F61AE600C143FC264A52892DC77136C1E36C572541006A62A124A5699A9827558143F9EED98F8905888CA035C0C46E2D03A9FA0294715A8939C95135D3AAE234ABC6B139B190C6E7A75F6044732A91414AE2A01EC2F2D3ECE402E9B93A27948A4FCBBDEB1C47A8E293C14AC970B633947355D111350ADC42831BE3D74275CF9B7872BE932A9196E88CA84697D4F28C8A62DE64898E47380B648A7BF113CD8C2A7BF3EFCDEED52E37C2302C5E52F492D6CA9184C7D0012B6F43D1C5F78471117CF87B46C1E1696EBB8566394DAC509A64A89CEC158395A84FD23CF87F46788B05CE51A98CA45EBC878905940FE78855C614FB85C555E42056F1B565EE39BE4BE367EBDBDD7C6D2EEECB92E67A20B92654BCC7A7F5ED76B3EE84982F85152C7C989960E3623E9BCF3AE126E7E72CA0B999EDE067B3354B0F0A86E2F5C22E5D88B0B2D254BEB4625346FD866054BA6F7667554DDFAECC5AAE3F2F9677AB6E5C088B2659A4DBD966B7BC2B8D5615465838513166AB4E76146B2759C0D576B97B98ADE6B3CEF31B7EF564BE6BE6E67C67EEE067FEB4E8B86A941A4921167DA22A2B25EA7CB7E676F6B4E88415573FB2489F670F3BF8593F758F449CE7B556C5775208B9B50FA10F15E94A0B75A8ECD9551B86E5790FB40FB63714F230B5891C5DE6634ADE358973A0E69B5685A4286AA26BE0A257620709917902AAB8A3A0C1C8FCD3993B04E69B3658224AF6988BE8ABB07E7539BE52EE697D9C3B5306E7B6D3EFE2D4028EE36F53FD2FED3FBDCA62D53252D1BA82C62D2A69E950D1C9D7A7E44F1F93B032B6279875AF0F67CDA9C2AC76580072A32DFEBDCBE05C686B06DCB9D12EC19F7DEC51F2C0C82A12F0B2EBCDA8CC3A6F8B32C8359FF30955B3FB96F4A8CC9D2ADA96E6486517721AD29F2FC1EFCCCCCFE4A3443A8B91D2B7913582D0531F2E4AB74730DC458ED307470D49FFD531E4D20F45A95404C67D5C9E4F6923DB5E11B35E102B5C1EEA134E9562361258F4B919944B6DABED0CAE0775BDFB93A6BAE785B861BF383BC0CD6B6A80BB31E70BEA599AD4B84C1AAFACF45801CAA065BCBACEF1BFD59D9501B7C4FEA5F8DC7DB42E15F2922FC47D4BA3FD2B52EDCA40B587CB4E1CED57E47C0F2B3F542D5DB9C1DAAD5EF9DE44AB3EBA7F24EAD465A91FA72E3E10115A8AD6374C806EEAF63575A0BCC45DACFA547C63CB9FFFAB4AD8D1E711C8069F03AE44DB613CC97291ACAE72D717B9CB06924B69B79CADB6B387B6A5F0BA4A78CD84DEA14C9EF37EA6B2D5AA0E5C5E44FE886570252EB9CFA9EF3BD5C18ADC7DA7D89201C394B18B9F49417F327FB60AEAC7C9218508FE8895622BA73CB2CD82EEBD4405158B922685FA964070AC44330667046409786D61CEC38BE8F185D73BF719DB0BBAF6C5D1173065EC3E3BB9DBED8190D68D1FD6EAF3364FD6C7F0CAF8105300334970325ED35F7DE2D8D2EEFB9223420544A0D0F1B12888A5088E478793445A79B42550EC3EB9B16CB07B74008CAFA9895E711FDBB61C3FE003B24EC9D7EE6A90E640E4DD3EB925E8C090CB638CB43FFC0A1CB6DDB79FFF0FC87E8CC0BD3D0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201906211317126_Relacionamento'
BEGIN
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [PK_dbo.MOVIMENTO_MANUAL]
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [PK_dbo.MOVIMENTO_MANUAL] PRIMARY KEY ([COD_MOVIMENTO], [DAT_MES], [DAT_ANO], [NUM_LANCAMENTO], [COD_COSIF], [COD_PRODUTO])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906211317126_Relacionamento', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400D55BDD6EE3B815BE2FD07710745964AD38C16CDBC0DE85D64916C6C67610D983DE198C443B4425CA4B52418CA24FD68B3E525FA1477F9444FD5892B5130F06012622F9F1F0F0E3C7431EE67FFFF9EFE4E70FCFD5DE31E3C4A7537D3CBAD6354C6DDF21743FD503B1FBE16FFACF3FFDF94F9307C7FBD0BEA6F56EC37AD092F2A9FE26C4E1CE30B8FD863DC4471EB199CFFD9D18D9BE6720C7376EAEAFFF6E8CC70606081DB0346DF21250413C1CFD02BFCE7C6AE3830890BBF01DECF2E43B945811AAB6441EE60764E3A9FEF001FF1FCDE98EA1D173680F176030D635D32508CCB1B0BBD33544A92F900063EF361C5B82F9746F1DE00372D7C703867A3BE4729C0CE22EABDE763CD737E1788CAC610A65075CF85E47C0F16DE220436DDECBCDBA7420B8F0015C2D8EE1A823374EF599CF09B848EDE96EE6B2B056EAE27BDF2394F8A3A83DC17C14B5BBD20AA5579213409DF0DF95360B5C11303CA538100CB957DA73F0EA12FB377C5CFBFFC4744A03D7CD1B08264259E1037C7A66FE0133717CC13B69B643F6BEAE196DABC2772710A5161343ED4E22283DC5DEF835208EAE2DC16AF4EA62491CA30584B4E01C241771F03BB1918D245248729898C02B94C23212A87307164C7FC04BC8E9E753684BF44EF6118114DC85FF0E4B9C0A1F405EB01B55E16FE490F4218BB7091F1F99EFBDF86EBE655CB45D23B6C7022CF4ABCB2D3F607607CBE4B454981523CA1A99518502D9656A52B13435386FD0C4C81662E3F294A3EBB14465DBEF62992E306F55CFA4EDF096818799FF84A88D1207B6D68A8483DF85B6446E8BDBFF7214B873FBC89D71FB3915E31F3B0394FD2CD16E6F7A4A6532011721B9F798DB8CE4E556308887746D813E9E30DD8BB7A9FE0502A047F2819DF44382BCA104A227682358D07D6AEE9140B9F51FF70E1FF11A3E7546DBF00031D2348AF1973F62145F91EBB38EA4A815EB8418E7ED20AA5CD7ED3043EC201976C52E522A6C306D90DD44DAD0792F495A5EDA4E3290C4E61C61099FE15F31C50C169AF38C84C00CC2F6B98323670EA116B7EDD4E27302B568095407692DA3213540AB8E95DAF137F072ECAD0B71E7FCD145FBEC14D79EDC815713370FC47398520733F7080CC8EB5F712A16D87BC52CDD4D7DE6216808AA19C0AFE3D2C4156A2FD60B59F5A6ECD3D87B273C9A32E66C2FC6409FE6395390775F7AE3C72FCD9E9B5354A8FFD7DB36EE3339F76D12B9438DCF936DA7D8E50375B4137B50B67C735BFD025C440EE014581453FD2FA5A1D4E3CAC597E126FB6111B34C2C905ACC4291432E2C010E5343A828EB32A1363920B7B97BA559A7A341F7383B9C2D69985A728F0F9886E2DD3C11ED8DA8391CF4335B5AA7EC6AA7266362E4A8D896A1A91DA7B9540A470663696993C890A59BFE60A62A269CC3D55EBC539C7B5EFFDF8040C56DBF6E8A6B6E444EC85013696AA28A6F4598CAEEBF11592A9D79998213476E51D044A8DC5EA31820FC883F444528B1E13889267812EDAA2408412D2C94A0340B138BA42A71A8D83C7FF95882C809DA0998C4AD552075374039A75598931E5573B56A4EB3EA3C9E0E2CA4F1C5E19718713A94C821A5F3A01EC28AC3ECE402E9B92627548A4FCBBDEB1C47A8E293C3CAC870B633947355D9110D0ADC42834FCE5F0BD53D6FE0E9F94EAA4496D233E29C5E9AFB336A927F93053A1CE02C904B06265F342BCE04CE7EB0BA67C7BC18C3B07945924C5A2B7B123E437BAC9446A28B1F09E322BCB07B45E1E169E678A56A054DAC519AB4AB82EC95272B559FB47AF8FF9CF09613A2A34A19C9BCF808030B291F8D11AB8C29B78B92B1C845ACE6B665E6BB8147936FABFBED6C65CD1FAB82E66620B92654BCE797D5FD66BDEA84584C9D952C7C322DB0713E33676627DCF4FC9C07B4D6E6167ED61BABF2A060285E2FEDD2A51956569ACA97566CCAA9DF108CCAF6CDEEAC6A68DB95598BD5D7F9E261D98D0B51D2248F746FAEB78B87CAD9AAC38812272A86B9EC6447397792075C6E16DB277339333B8FAF7052BDC0B598BB252D78F0C1DAC2CFEC65DE710D2A9992D2CCF6E188CC97A8E3DD581BF365DE092BC981E491BE9A4F5BF859BD5C9042C8AD7D087DA809575AA8436DCBAEDA302C337BA05DD8DE508AC3D42AB277198F2971D72489814EBFCC2A054571155D0317BD13270C88AC2350C51B851546D6EFEECC2530DEACC20251B2C35CC4B7C2FACDF5F84679D775396FAC0CCE1DB7DF43AB391CC73FA6FABFB47FF74A8BD50B7A4DED1A1AB7C8A4655DC527DF8092DF034CA2CCD88E60D63D499F37A70EB3DE6121C89D36FFC7368773A5AD1870E74EBB067FF6B147890363AB48C8CBAE2FA972EBBC2DCA20CF82CE2754C37E59D1A23676AAA95B1923553DE03911FE7CFE6AC8F9E94CF64AA4B3F82B6722B646107AECC35C3949310CF790EBF6C15127B0FF5A6A213D2D1D1DA10C2A18430958BD65E33E542886D2B16DEF88D96F88959E2EF5A1994A7D07092CFABC4B2A84D4F576868F93BABE3CCA42ECC105B8FE25CDF9F27B96269DA4E3C9072E3D98A6745A357FB7059EB57AE132E006DA3F715F788AD8259F5E719FDC3791DA3F7FD52E69D47429D08DA3FD52A29F61E54565DE9577AADDB29B9F4DB4FA83FE2551A729A6BD9C2CFA404468295ADF3101BAA9DBB7D481EA8478394754732357BC2DA84B78C797291075BD865C89B7C36490D522599F136F4E8957752497D276612E37E653DBC47953DEBC61409F90542F783F97076B9535AE4E395F62D25C9997C2E5EBE70E75B09478DF21B664C03049EFF2A52AE84FEE8F6241FD38D96710E19FC8526C179447D699D39D9FAAA062515AA5940D13088E6FC864704640B680621B731E3D5B4F9EC73E78AFD899D355200E81802163EFD52DBC850F85B4A9FF28B35FB479B23A440FCC8718029849C213E88AFE1210D791763F561C116A2042854E8E45E15C8AF078B43F4AA4A54F5B0225EE931BCB1A7B0717C0F88A5AE81DF7B16DC3F113DE23FB98DE8DD7839C9E88A2DB27F704ED19F2788291B5875F81C38EF7F1D3FF012D7433491B3E0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201906211426241_RemoverCodigoMovimento'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COD_MOVIMENTO]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_COD_MOVIMENTO]
    IF object_id(N'[dbo].[FK_dbo.PRODUTO_COSIF_dbo.PRODUTO_COD_PRODUTO]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[PRODUTO_COSIF] DROP CONSTRAINT [FK_dbo.PRODUTO_COSIF_dbo.PRODUTO_COD_PRODUTO]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_COD_MOVIMENTO' AND object_id = object_id(N'[dbo].[MOVIMENTO_MANUAL]', N'U'))
        DROP INDEX [IX_COD_MOVIMENTO] ON [dbo].[MOVIMENTO_MANUAL]
    EXECUTE sp_rename @objname = N'dbo.MOVIMENTO_MANUAL.COD_MOVIMENTO', @newname = N'Produto_Codigo', @objtype = N'COLUMN'
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [PK_dbo.MOVIMENTO_MANUAL]
    ALTER TABLE [dbo].[PRODUTO] DROP CONSTRAINT [PK_dbo.PRODUTO]
    DECLARE @var1 nvarchar(128)
    SELECT @var1 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.MOVIMENTO_MANUAL')
    AND col_name(parent_object_id, parent_column_id) = 'Produto_Codigo';
    IF @var1 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [' + @var1 + ']')
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ALTER COLUMN [Produto_Codigo] [uniqueidentifier] NULL
    DECLARE @var2 nvarchar(128)
    SELECT @var2 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.PRODUTO')
    AND col_name(parent_object_id, parent_column_id) = 'COD_PRODUTO';
    IF @var2 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[PRODUTO] DROP CONSTRAINT [' + @var2 + ']')
    ALTER TABLE [dbo].[PRODUTO] ALTER COLUMN [COD_PRODUTO] [uniqueidentifier] NOT NULL
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [PK_dbo.MOVIMENTO_MANUAL] PRIMARY KEY ([DAT_MES], [DAT_ANO], [NUM_LANCAMENTO], [COD_COSIF], [COD_PRODUTO])
    ALTER TABLE [dbo].[PRODUTO] ADD CONSTRAINT [PK_dbo.PRODUTO] PRIMARY KEY ([COD_PRODUTO])
    CREATE INDEX [IX_Produto_Codigo] ON [dbo].[MOVIMENTO_MANUAL]([Produto_Codigo])
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] ADD CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_Produto_Codigo] FOREIGN KEY ([Produto_Codigo]) REFERENCES [dbo].[PRODUTO] ([COD_PRODUTO])
    ALTER TABLE [dbo].[PRODUTO_COSIF] ADD CONSTRAINT [FK_dbo.PRODUTO_COSIF_dbo.PRODUTO_COD_PRODUTO] FOREIGN KEY ([COD_PRODUTO]) REFERENCES [dbo].[PRODUTO] ([COD_PRODUTO])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906211426241_RemoverCodigoMovimento', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400D55BDD6EE33616BE5F60DF41D0E522B5E204D39FC09E427592C2686C0F227BB0770623310EB112E58A541063B14FD68B3E525FA1477F944489B2242B132F06012612F9E9F0F03B7FE4C95F7FFC39F9F9CD73B5571C30E2D3A93E1E5DEA1AA6B6EF10BA9BEA217FFEEE47FDE7CFFFFCC7E4CEF1DEB4AFD9B8EB681CCCA46CAABF70BEBF310C66BF600FB19147ECC067FE331FD9BE6720C737AE2E2F7F32C6630303840E589A36790C29271E8E7F815F673EB5F19E87C85DF80E7659FA1CDE5831AAB6441E667B64E3A97EF706FF1FCDE97380465F2279180781B1AE992E41208E85DD675D4394FA1C7110F666C3B0C5039FEEAC3D3C40EEFAB0C730EE19B90CA78BB8C987B75DCFE555B41E239F9841D921E3BED711707C9D2AC890A7F752B32E14082ABC0355F343B4EA588D537DE633022A92BF743373836854A6E25BDF2394F8A3783EC16C14CFBBD04A6F2F0427803AD1BF0B6D16BA3C0CF094E29007C8BDD0BE844F2EB17FC387B5FF1F4CA73474DDA2802022BC2B3D80475F027F8F037E78C4CF426C87EC7C5D33DA0E85E74EC82B332686FC3981207D29D1C6AF2171746D0952A327170BE2182D208404A720B98881DE898D6C24902292C3C6845EE92D9811479D3F60C1F687AC829C3D3E86B644AF64171348C25DF8AF60E294FB00F288DD78087B21FBF41BE2F536E5E37DE07B8FBE5B9C99BCDAAE51B0C31C24F4EBDF5B7E18D81D2413DB522356822846E442955E884F662295DF660217059A18B921369AA7585D0F1315733FCE4C1798B5B25193B6B3E565E8E1C07F40D446A9565A3B809458EFEF30E235271BF3CB81E3CE2618EB22993FA77CFC7D6780AA9204DAF5554FE7956AEF2C9CE02D6676408A0E900790A1E8DA02BD3D60BAE32F53FD13A424F7E40D3BD98314794309E43330870761F7ADB9451C152C32F93A3CC46B78D4196DC3421490A6558C3FBDC72ABE22D70F3A9242E93E53629CE6D36507AAF2F943F8F41CBBC6AF575E368836887F173274F6EEE9CC734BC1BE4942D5C6035CB7F3001F930EC5B4AE4F855AE61C721A549F91B4E364E81518A94A24E7ECDE45BBBC566A4FD8D05364A7037117B6D4C1817B0006147D5A792B16D87BC2411621FDC04330113C6108BF8E2B1B571ABD582FC4D0ABAA4E13ED1DD168C69893B598007D98E64C4E5E7DA18DEF3F356B6E4E5169FC0FD76DD46732E6DB2456879C05A7A1A4FCC93BEA6847E24A6EBE85F0BD0015913D28058C62AAFFABB21435AE30BE1C378D7165CC2AB1C07DE200900872C104186C0DA1BCEA6B09B5C91EB9CD9F97A675AA93BB27BED16E09C1E437B7788F814A94376F447B2114D97A3FB1857452A43AB61913A340C5B60CCDE438CEA54A8A31184B2B412247166A2AE35E8E4663D9365B2FBE1CB254E2296AE62326D4B46045443CBAD881CCB2F6F3A718650703AB55E6791A4B9275C4019F50111AE2F8153DC46FBC260C6E184E23214B3335990411A885B99450E5294E9954150E95A7178FA72A1005633C0293AAB50E44759C50505A8D3859E95418A5A8AEE47D3C1E1485F0E5E55718713C0C1690B27D908B82F2323BA94068AE4909B5CEA7A5DF3D4511B2F32960E564385919524D50554483076EE1838FEE5F0BAF7BDAC2B3DA447889FCD2C7486E7DB2DB2143713D3459A0FD1EF2D8C27551FA44B392BBA2D97756F7FB132FC1306C56738D22A4155FE27E8076587A1B3B5D7C4F02C6A303A4271425FE33C7AB0C2BF94485A7C93E55727BD5CDCABC4F363CFA7FC1F156AFCC46B56E24D7E23D2C2CA27CBC462C33A63A2FBEAE432E0A14D5FFCC77438FA6CF56B7DBD9CA9ADFD7257CCD40C22664BC2F8FABDBCD7AD509B17CB95291F0C1B440C6F9CC9C999D70B3DAAF0868ADCD2DFCAC37566D926B485AAF44E9CA0E4B9626F3A5159B0ADE6F0846E571B33BAB1AE6AAD41C9FBB17757C6BAEB78BBB5A05AB30E2B37719C35C76DAEEEAF17B1170B9596C1FCCE5CC5CDC2D3BD2B358189DA1F9140EE54A1ABCB3B6F0337B9C77341BE9B0BDB2B3ABAFF3CE3A1447EEF27A37D6C67C9C77C24A8FD18B485FCD872DFCAC1ECFC8A845341EC2A41519460B8356CEEC1A288665660FB4F373E7E5B44AE1D3F3F4B183E7CE27B576D051A6A8BAFC3F5E2CB7A64286A4AEA50B72F4115159539F1C7C4E0F3DEF1378860C3BC3069DC6CD8484D921F169D49C451732E26CBD3D5DE4CAA46A659502451E226C5C142A524132498B83E34D6D956A2119A26BB08857E244958275004BF546D18091F5BB3B73096C783E60812879C68C2747FDFAD5E5F84A6A893B9FF6348331C7EDD7A336A70E7E9BEAFFD5FED7EBFE52CD5FC568053F5B5C79E69F4A8E84424A7E0F31898ED9A0E0C041F76E8AA2382A4CB5C222901B6DFEEF6D01E7425B05C09D1BED12F4D9471EA9404AA422112FBB36A115A2695B94413AAA4E2394D2E52BC6D63AF7BAA6A7239EFB63B92D569DEC1427F4D067CF85421218E621D7ED83232BAB3F0B5B186D4B038B510635B5A14C5F2DD9B8876452A997C8F68A02FB050595EEAC1EFC28947C09B68338E67D5AAF4A259F5ACEA8FFAA6B73555E02F6A79E9CAD9CB0CB652815F1AABD300374309D1E9E4F0AB8476DA407BB25CC3ACE5C5F362BF67DC35DFFDE895287679796869A6B91BE77D9FDAF61DBDD7D36562C9D28D8E9B2B6E920F4DDA53CABE607A9FDB75B47C219704D7DFE752EEC397E2EF20D08D1AE21A403199A98D0D271FD1F33A09B87FB96BEA0BEB7A37ADDA938A92ED7F7AADE8DE4F803B2BDA7882B49484C1759EF28D5ED1DCDDD1D751F1239E776612E37E643DB1E90A6169086057D407F4849FB852BDD560D10F5DD13E7D8FF21ED4BE952E263973A587747DF25B664C030FD1BD56350F03F85BF0006EFC7C82E8788CE7729B64B9E478C99D3673FF3829244D990CA413D4750362233803200D91C5EDB98B1F8AF07D22EE53BEF093B73BA0AF93EE4B064EC3DB987A2322247DAF4FDB849A52CF364B58FFBFC8758028849A2CA77457F0989EB08B9EF6BCA040544E4A17FC5F03CD94B70F81CEF0E0269E9D39640A9FA446059636FEF02185B510BBDE23EB26D187EC03B641FB2D36C35C8F18D28AB7D724BD02E401E4B31F2F9F02B70D8F1DE3EFF0DE3B7D63A083F0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201906211433580_CorrecaoCodigoMovimento'
BEGIN
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906211433580_CorrecaoCodigoMovimento', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400D55BDD6EE33616BE5F60DF41D0E522B5E204D39FC09E427592C2686C0F227BB0770623310EB112E58A541063B14FD68B3E525FA1477F944489B2242B132F06012612F9E9F0F03B7FE4C95F7FFC39F9F9CD73B5571C30E2D3A93E1E5DEA1AA6B6EF10BA9BEA217FFEEE47FDE7CFFFFCC7E4CEF1DEB4AFD9B8EB681CCCA46CAABF70BEBF310C66BF600FB19147ECC067FE331FD9BE6720C737AE2E2F7F32C6630303840E589A36790C29271E8E7F815F673EB5F19E87C85DF80E7659FA1CDE5831AAB6441E667B64E3A97EF706FF1FCDE97380465F2279180781B1AE992E41208E85DD675D4394FA1C7110F666C3B0C5039FEEAC3D3C40EEFAB0C730EE19B90CA78BB8C987B75DCFE555B41E239F9841D921E3BED711707C9D2AC890A7F752B32E14082ABC0355F343B4EA588D537DE633022A92BF743373836854A6E25BDF2394F8A3783EC16C14CFBBD04A6F2F0427803AD1BF0B6D16BA3C0CF094E29007C8BDD0BE844F2EB17FC387B5FF1F4CA73474DDA2802022BC2B3D80475F027F8F037E78C4CF426C87EC7C5D33DA0E85E74EC82B332686FC3981207D29D1C6AF2171746D0952A327170BE2182D208404A720B98881DE898D6C24902292C3C6845EE92D9811479D3F60C1F687AC829C3D3E86B644AF64171348C25DF8AF60E294FB00F288DD78087B21FBF41BE2F536E5E37DE07B8FBE5B9C99BCDAAE51B0C31C24F4EBDF5B7E18D81D2413DB522356822846E442955E884F662295DF660217059A18B921369AA7585D0F1315733FCE4C1798B5B25193B6B3E565E8E1C07F40D446A9565A3B809458EFEF30E235271BF3CB81E3CE2618EB22993FA77CFC7D6780AA9204DAF5554FE7956AEF2C9CE02D6676408A0E900790A1E8DA02BD3D60BAE32F53FD13A424F7E40D3BD98314794309E43330870761F7ADB9451C152C32F93A3CC46B78D4196DC3421490A6558C3FBDC72ABE22D70F3A9242E93E53629CE6D36507AAF2F943F8F41CBBC6AF575E368836887F173274F6EEE9CC734BC1BE4942D5C6035CB7F3001F930EC5B4AE4F855AE61C721A549F91B4E364E81518A94A24E7ECDE45BBBC566A4FD8D05364A7037117B6D4C1817B0006147D5A792B16D87BC2411621FDC04330113C6108BF8E2B1B571ABD582FC4D0ABAA4E13ED1DD168C69893B598007D98E64C4E5E7DA18DEF3F356B6E4E5169FC0FD76DD46732E6DB2456879C05A7A1A4FCC93BEA6847E24A6EBE85F0BD0015913D28058C62AAFFABB21435AE30BE1C378D7165CC2AB1C07DE200900872C104186C0DA1BCEA6B09B5C91EB9CD9F97A675AA93BB27BED16E09C1E437B7788F814A94376F447B2114D97A3FB1857452A43AB61913A340C5B60CCDE438CEA54A8A31184B2B412247166A2AE35E8E4663D9365B2FBE1CB254E2296AE62326D4B46045443CBAD881CCB2F6F3A718650703AB55E6791A4B9275C4019F50111AE2F8153DC46FBC260C6E184E23214B3335990411A885B99450E5294E9954150E95A7178FA72A1005633C0293AAB50E44759C50505A8D3859E95418A5A8AEE47D3C1E1485F0E5E55718713C0C1690B27D908B82F2323BA94068AE4909B5CEA7A5DF3D4511B2F32960E564385919524D50554483076EE1838FEE5F0BAF7BDAC2B3DA447889FCD2C7486E7DB2DB2143713D3459A0FD1EF2D8C27551FA44B392BBA2D97756F7FB132FC1306C56738D22A4155FE27E8076587A1B3B5D7C4F02C6A303A4271425FE33C7AB0C2BF94485A7C93E55727BD5CDCABC4F363CFA7FC1F156AFCC46B56E24D7E23D2C2CA27CBC462C33A63A2FBEAE432E0A14D5FFCC77438FA6CF56B7DBD9CA9ADFD7257CCD40C22664BC2F8FABDBCD7AD509B17CB95291F0C1B440C6F9CC9C999D70B3DAAF0868ADCD2DFCAC37566D926B485AAF44E9CA0E4B9626F3A5159B0ADE6F0846E571B33BAB1AE6AAD41C9FBB17757C6BAEB78BBB5A05AB30E2B37719C35C76DAEEEAF17B1170B9596C1FCCE5CC5CDC2D3BD2B358189DA1F9140EE54A1ABCB3B6F0337B9C77341BE9B0BDB2B3ABAFF3CE3A1447EEF27A37D6C67C9C77C24A8FD18B485FCD872DFCAC1ECFC8A845341EC2A41519460B8356CEEC1A288665660FB4F373E7E5B44AE1D3F3F4B183E7CE27B576D051A6A8BAFC3F5E2CB7A64286A4AEA50B72F4115159539F1C7C4E0F3DEF1378860C3BC3069DC6CD8484D921F169D49C451732E26CBD3D5DE4CAA46A659502451E226C5C142A524132498B83E34D6D956A2119A26BB08857E244958275004BF546D18091F5BB3B73096C783E60812879C68C2747FDFAD5E5F84A6A893B9FF6348331C7EDD7A336A70E7E9BEAFFD5FED7EBFE52CD5FC568053F5B5C79E69F4A8E84424A7E0F31898ED9A0E0C041F76E8AA2382A4CB5C222901B6DFEEF6D01E7425B05C09D1BED12F4D9471EA9404AA422112FBB36A115A2695B94413AAA4E2394D2E52BC6D63AF7BAA6A7239EFB63B92D569DEC1427F4D067CF85421218E621D7ED83232BAB3F0B5B186D4B038B510635B5A14C5F2DD9B8876452A997C8F68A02FB050595EEAC1EFC28947C09B68338E67D5AAF4A259F5ACEA8FFAA6B73555E02F6A79E9CAD9CB0CB652815F1AABD300374309D1E9E4F0AB8476DA407BB25CC3ACE5C5F362BF67DC35DFFDE895287679796869A6B91BE77D9FDAF61DBDD7D36562C9D28D8E9B2B6E920F4DDA53CABE607A9FDB75B47C219704D7DFE752EEC397E2EF20D08D1AE21A403199A98D0D271FD1F33A09B87FB96BEA0BEB7A37ADDA938A92ED7F7AADE8DE4F803B2BDA7882B49484C1759EF28D5ED1DCDDD1D751F1239E776612E37E643DB1E90A6169086057D407F4849FB852BDD560D10F5DD13E7D8FF21ED4BE952E263973A587747DF25B664C030FD1BD56350F03F85BF0006EFC7C82E8788CE7729B64B9E478C99D3673FF3829244D990CA413D4750362233803200D91C5EDB98B1F8AF07D22EE53BEF093B73BA0AF93EE4B064EC3DB987A2322247DAF4FDB849A52CF364B58FFBFC8758028849A2CA77457F0989EB08B9EF6BCA040544E4A17FC5F03CD94B70F81CEF0E0269E9D39640A9FA446059636FEF02185B510BBDE23EB26D187EC03B641FB2D36C35C8F18D28AB7D724BD02E401E4B31F2F9F02B70D8F1DE3EFF0DE3B7D63A083F0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201906211453456_CorrecaoMovimentoCodigoProduto'
BEGIN
    IF object_id(N'[dbo].[FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_Produto_Codigo]', N'F') IS NOT NULL
        ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [FK_dbo.MOVIMENTO_MANUAL_dbo.PRODUTO_Produto_Codigo]
    IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Produto_Codigo' AND object_id = object_id(N'[dbo].[MOVIMENTO_MANUAL]', N'U'))
        DROP INDEX [IX_Produto_Codigo] ON [dbo].[MOVIMENTO_MANUAL]
    DECLARE @var3 nvarchar(128)
    SELECT @var3 = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(N'dbo.MOVIMENTO_MANUAL')
    AND col_name(parent_object_id, parent_column_id) = 'Produto_Codigo';
    IF @var3 IS NOT NULL
        EXECUTE('ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP CONSTRAINT [' + @var3 + ']')
    ALTER TABLE [dbo].[MOVIMENTO_MANUAL] DROP COLUMN [Produto_Codigo]
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201906211453456_CorrecaoMovimentoCodigoProduto', N'Exame.Infra.Migrations.Configuration',  0x1F8B0800000000000400CD5BCD6EE33610BE17E83B083A16A91527D86D1BD8BBD03AC9C2686C07961DF4663012E3109528AF4805368A3E590F7DA4BE42477F944489B6A4381B63116023911F8733DF0C8733CA7FFFFC3BF8BCF55CED05078CF874A8F77BE7BA86A9ED3B84AE877AC89F7EFE55FFFCE9C71F06378EB7D51EB27197D1389849D9507FE67C736518CC7EC61E623D8FD881CFFC27DEB37DCF408E6F5C9C9FFF66F4FB0606081DB0346D300F29271E8E7F815F473EB5F18687C89DF80E7659FA1CDE5831AA36451E661B64E3A17EB385FFF7C6F42940BDFB481EC64160AC6BA64B10886361F749D710A53E471C84BD5A326CF1C0A76B6B030F90BBD86D308C7B422EC3E926AEF2E14DF7737E11EDC7C827665076C8B8EFB504EC5FA60A32E4E99DD4AC0B05820A6F40D57C17ED3A56E3501FF98C808AE495AE466E108DCA547CED7B8412BF17CF2798F5E279675AE9ED99E0045027FA77A68D429787011E521CF200B967DA7DF8E812FB77BC5BF87F623AA4A1EB16050411E15DE9013CBA0FFC0D0EF86E8E9F84D80E59FBBA66341D0ACF9D9057660C0C79398120AD9468E36B481C5D9B82D4E8D1C5823846030821C16B905CC440EFC44636124811C9C130A1577A0B6EC451EB052C307FC82AC8D9E3436853F442D6318124DC89FF022E4EB90F2073ECC643D833D9A46B88D7AB948FB781EFCD7DB7383379B55AA0608D3948E8D7BFB7FC30B05B4826CC522356822846E442955E88253391CA6F33818B020D8CDC11F7BAA7D85D07171573DFCF4D279835F2519336F3E569E8E1C0BF43D446A9561A078094586F1F30E23D2786F9B2E3B8B50BC6BA48E68F29EF7F6C0D50559240BBBCE818BC52ED9D4410BCC6CC0E483100F20032145D9BA0ED1DA66BFE3CD43F404A724BB6D8C91EA4C84B4A209F81393C08DB9BE61A7154F0C86475788817F0A835DA92852820FB76D1FFF016BB7840AE1FB42485327CA6C4785D4C9703A82AE6770AA18272AD03683AF3D4B29CEF92B33471B2CB664EF63E1947CC9CFA6CA3E1B12E671AF5877E334E865E8191AA5C6DCC6E5DB4CEAF23CD091B7A8A04F048DC05933A387077C08062D8289B6282BD471C6487901F78082642B009E1D77EC570A5D193C5440CBDA8EA34D1DE018D668C79B51613A077D39CC9C98B2FB4F1F1C37ECD8D292A8DFFE5B289FA4CC67C9BC4EA9013CD345A9797BCA18E762074E7EE5B382127A022B201A580530CF59F2A5B51E30AE7CB71D363A48C592516844F1C0012DCEEC105189886505E8DB584DA6483DCFDCB4BD35A5D45DBE79691B58460F29B6BBCC14025CAF71BA2B9108A84B89BD8423AE9A43A648C8151A0E27E8696A3B68A478A9BD90116ED63A6E250C811855ADE8499B5CBBF86972D3856ABCCD3E44B72F0C6671EA1223AC6213C7A88B7BCE62458329C1E062C4D56641244A016E6524E919FF265525538549E5E2C8254200A51F3004CAAD63A10D5A5B5A0B41A71B204BD304A91C3CB763C7C2E08E1CBDBAF30E2F0495040CAEC20E7C5E56D36508194095615B027E834083B07456E10680A18B9E11B6F3CCB488563E4D5742329A76765774351771F4CD06603D94BA10E9F3ED1ACA4083FFAD96A5F98F6120CC36635F56921AD5889FB015A63E96D1C67F02D09188F6EE68F284AF7468E5719560A030AE7CA962A797AD55899C365C3A3FF17624DB517D1ABF59C5C8BB7B0B188EEF11EB1CC98EABCB80F825C1428EE7C23DF0D3D9A3E9B5DAF46336B7C5B77CCEF07123E21E3DDCF67D7CBC5AC1562B96A5D91F0CEB440C6F1C81C99AD70B38CBF08682DCC15FC2C96566D6A63485AAF1C4C150B4B9E26F3A5119B0A91EF188CCA8F8AF6ACDA3357A5E6B8A059D4F1B5B9584D6E6A15ACC2888B9A3286396D65EE6A5DB308385D4E5677E674644E6EA62DE9594C874FD07D0AA59892066FAC15FC8CE6E3966E2355312B969D3D8C5BEB50D432E5FD2EADA5391FB7C24AEB9345A407F36E053FB3F90939B5388D8FE1D28A0CA381432B67B63D288ECBCC0E682716CE2BA9933C44AC2E522829551AA469CBE1EF182A794C3244D740452FC48972186B0754F17AD1809EF5CD1DB904F69B0F98204A9E30E349E949BF38EF5F485F419CCE170906638EDBEDB384315C1AB743FD2FEDEF4EF5747540578C56D0B841093E5F2AB99F85947C0B3189EEBC900AE1A07D03AD288E0A53ADB008E44A1BFFB12AE09C69B300B873A59D833EBBC823A56E895424E265DBEF0E0A7EDE14E5284DF4D7114A990929C6D6663C757DEE03C9CCFB725BEC3AB1142774D7C5E64221090CF390EB76C19195D59D850D9CB6A183C5284775B563B9BE5AB27E07C9A4243491ED0505F6330A2A0DF90EFC2824A309B68338E65DBAEDA564542D67D4726FDB4FCF93D3A3872E75F3FAF527E1ABCEB68374EC402409B3CE3C97251A35EA2F1FF164E9DE362B7D3FD3A69B555317EDDA6CEBDE7E6856F3DF775B6E47C16E8DB0F790F264FA5ED28755ED1A53AD797A2472A96FBD6F47977684FE9EA6AF6F61554BDC0D7A54EA165572B18473F431E24A1201D34DD6FB85BA8BB5BF8955B79038CD571373BA34EF9AB6BAF675BAF66CE81DDA6025ED17CAF88D1A5EF5DDB2536A7349F62815A00EB6B60EABE5388DAC6AD5059CB2F0372610121859E710D15F9C506C97DC518C19D3273F0B0D9244D9904AB99C23C8529119402A846C0EAF6DCC58FCF15CFA91CE8DF7889D319D857C1372D832F61EDD5D51195174D9B77EDCAD2BCB3C986DE2CFDC8EB10510934489F68C7E0989EB08B96F6B5225054414B6BE62789ED812A220C7EB9D409AFAB42150AA3E116D17D8DBB800C666D4422FB88B6C4B86EFF01AD9BBAC78A606396C88B2DA07D704AD03E4B114239F0FBF02871D6FFBE97F7DF1FBB26A350000 , N'6.2.0-61023')
END

